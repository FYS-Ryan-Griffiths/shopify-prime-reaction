{% comment %}
  FAQ Section
  Accordion-style frequently asked questions
{% endcomment %}

<section class="faq section">
  <div class="container">
    {%- if section.settings.heading != blank -%}
      <header class="faq__header">
        <h2 class="faq__title h2">{{ section.settings.heading }}</h2>
        {%- if section.settings.subheading != blank -%}
          <p class="faq__subtitle">{{ section.settings.subheading }}</p>
        {%- endif -%}
      </header>
    {%- endif -%}
    
    <div class="faq__content">
      {%- for block in section.blocks -%}
        {%- case block.type -%}
          {%- when 'heading' -%}
            <h3 class="faq__category-heading h4" {{ block.shopify_attributes }}>
              {{ block.settings.heading }}
            </h3>
            
          {%- when 'question' -%}
            <details class="faq__item" {{ block.shopify_attributes }}>
              <summary class="faq__question">
                <span class="faq__question-text">{{ block.settings.question }}</span>
                <span class="faq__icon">
                  <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <line x1="12" y1="5" x2="12" y2="19"/>
                    <line x1="5" y1="12" x2="19" y2="12"/>
                  </svg>
                </span>
              </summary>
              <div class="faq__answer rte">
                {{ block.settings.answer }}
              </div>
            </details>
        {%- endcase -%}
      {%- endfor -%}
    </div>
    
    {%- if section.settings.show_contact_cta -%}
      <div class="faq__cta">
        <p>{{ 'faq.cta_text' | t | default: "Still have questions?" }}</p>
        <a href="{{ section.settings.contact_link | default: '/pages/contact' }}" class="button button--secondary">
          {{ 'faq.cta_button' | t | default: "Contact Us" }}
        </a>
      </div>
    {%- endif -%}
  </div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', function() {
    const faqItems = document.querySelectorAll('.faq__item');
    
    faqItems.forEach(item => {
      item.addEventListener('toggle', function() {
        const icon = this.querySelector('.faq__icon svg');
        if (this.open) {
          icon.innerHTML = '<line x1="5" y1="12" x2="19" y2="12"/>';
        } else {
          icon.innerHTML = '<line x1="12" y1="5" x2="12" y2="19"/><line x1="5" y1="12" x2="19" y2="12"/>';
        }
      });
    });
  });
</script>

{% schema %}
{
  "name": "FAQ",
  "tag": "section",
  "class": "faq-section",
  "settings": [
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Frequently Asked Questions"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading"
    },
    {
      "type": "checkbox",
      "id": "show_contact_cta",
      "label": "Show contact CTA",
      "default": true
    },
    {
      "type": "url",
      "id": "contact_link",
      "label": "Contact page link"
    }
  ],
  "blocks": [
    {
      "type": "heading",
      "name": "Category Heading",
      "settings": [
        {
          "type": "text",
          "id": "heading",
          "label": "Heading",
          "default": "Category"
        }
      ]
    },
    {
      "type": "question",
      "name": "Question",
      "settings": [
        {
          "type": "text",
          "id": "question",
          "label": "Question",
          "default": "What is your question?"
        },
        {
          "type": "richtext",
          "id": "answer",
          "label": "Answer",
          "default": "<p>Your answer goes here.</p>"
        }
      ]
    }
  ],
  "presets": [
    {
      "name": "FAQ",
      "blocks": [
        {
          "type": "question",
          "settings": {
            "question": "What is your return policy?",
            "answer": "<p>We offer a 30-day return policy for all unused items in their original packaging.</p>"
          }
        },
        {
          "type": "question",
          "settings": {
            "question": "How long does shipping take?",
            "answer": "<p>Standard shipping takes 3-5 business days. Express shipping is available at checkout.</p>"
          }
        }
      ]
    }
  ]
}
{% endschema %}
