{% comment %}
  Featured Products Section
  Editorial product cards with hover effects
{% endcomment %}

{%- style -%}
.featured-products { padding: var(--spacing-section) 0; }
.featured-products__inner { max-width: var(--page-width); margin: 0 auto; padding: 0 var(--spacing-6); }
.featured-products__header { display: flex; justify-content: space-between; align-items: flex-end; margin-bottom: var(--spacing-10); flex-wrap: wrap; gap: var(--spacing-4); }
.featured-products__title { font-family: var(--font-heading-family); font-size: var(--font-size-3xl); margin: 0; }
.featured-products__link { font-size: var(--font-size-sm); font-weight: 500; text-transform: uppercase; letter-spacing: 0.05em; color: var(--color-accent); text-decoration: none; display: inline-flex; align-items: center; gap: var(--spacing-2); }
.featured-products__link:hover { gap: var(--spacing-3); }
.featured-products__grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: var(--spacing-6); }
@media (max-width: 989px) { .featured-products__grid { grid-template-columns: repeat(2, 1fr); } }
@media (max-width: 749px) { .featured-products__grid { grid-template-columns: 1fr; } }
{%- endstyle -%}

<section class="featured-products color-{{ section.settings.color_scheme }}">
  <div class="featured-products__inner">
    <header class="featured-products__header">
      <h2 class="featured-products__title">{{ section.settings.heading | default: 'Featured Products' }}</h2>
      {% if section.settings.collection != blank %}
      <a href="{{ section.settings.collection.url }}" class="featured-products__link">
        {{ section.settings.link_text | default: 'View All' }}
        <svg width="16" height="16" viewBox="0 0 16 16" fill="none"><path d="M6 3L11 8L6 13" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/></svg>
      </a>
      {% endif %}
    </header>

    <div class="featured-products__grid">
      {% assign products_to_show = section.settings.products_to_show | default: 4 %}
      {% if section.settings.collection != blank %}
        {% for product in section.settings.collection.products limit: products_to_show %}
          {% render 'product-card', product: product, show_vendor: section.settings.show_vendor %}
        {% endfor %}
      {% else %}
        {% for block in section.blocks limit: products_to_show %}
          {% if block.settings.product != blank %}
            {% render 'product-card', product: block.settings.product, show_vendor: section.settings.show_vendor %}
          {% endif %}
        {% endfor %}
      {% endif %}
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Featured Products",
  "tag": "section",
  "class": "section-featured-products",
  "settings": [
    { "type": "text", "id": "heading", "label": "Heading", "default": "Featured Products" },
    { "type": "collection", "id": "collection", "label": "Collection" },
    { "type": "range", "id": "products_to_show", "label": "Products to show", "min": 2, "max": 12, "step": 1, "default": 4 },
    { "type": "text", "id": "link_text", "label": "Link text", "default": "View All" },
    { "type": "checkbox", "id": "show_vendor", "label": "Show vendor", "default": false },
    { "type": "select", "id": "color_scheme", "label": "Color scheme", "default": "background-1", "options": [
      { "value": "background-1", "label": "Background 1" },
      { "value": "background-2", "label": "Background 2" }
    ]}
  ],
  "blocks": [
    {
      "type": "product",
      "name": "Product",
      "settings": [
        { "type": "product", "id": "product", "label": "Product" }
      ]
    }
  ],
  "presets": [{ "name": "Featured Products" }]
}
{% endschema %}
