{% comment %}
  Science Explainer Section
  Animated SDI technology explainer
{% endcomment %}

{%- style -%}
.science-explainer { padding: var(--spacing-section) 0; background: var(--color-background-secondary); }
.science-explainer__inner { max-width: var(--page-width); margin: 0 auto; padding: 0 var(--spacing-6); }
.science-explainer__grid { display: grid; grid-template-columns: 1fr 1fr; gap: var(--spacing-12); align-items: center; }
.science-explainer__content { max-width: 540px; }
.science-explainer__label { font-size: var(--font-size-xs); text-transform: uppercase; letter-spacing: 0.15em; color: var(--color-accent); margin-bottom: var(--spacing-4); }
.science-explainer__title { font-family: var(--font-heading-family); font-size: var(--font-size-4xl); line-height: 1.1; margin: 0 0 var(--spacing-6); }
.science-explainer__text { font-size: var(--font-size-lg); line-height: 1.7; color: var(--color-foreground-muted); margin-bottom: var(--spacing-8); }
.science-explainer__features { display: flex; flex-direction: column; gap: var(--spacing-4); }
.science-feature { display: flex; gap: var(--spacing-4); padding: var(--spacing-4); background: var(--color-background); border-radius: var(--radius-md); }
.science-feature__icon { width: 48px; height: 48px; flex-shrink: 0; display: flex; align-items: center; justify-content: center; background: var(--color-accent); border-radius: var(--radius-full); color: #fff; }
.science-feature__content h4 { font-size: var(--font-size-base); font-weight: 600; margin: 0 0 var(--spacing-1); }
.science-feature__content p { font-size: var(--font-size-sm); color: var(--color-foreground-muted); margin: 0; }
.science-explainer__visual { position: relative; aspect-ratio: 1; }
.science-explainer__image { width: 100%; height: 100%; object-fit: cover; border-radius: var(--radius-lg); }
.science-explainer__animation { position: absolute; inset: 0; pointer-events: none; }
.liquid-blob { position: absolute; width: 120px; height: 120px; background: var(--color-accent); opacity: 0.2; border-radius: 50%; filter: blur(40px); animation: blobFloat 8s ease-in-out infinite; }
.liquid-blob:nth-child(2) { top: 60%; left: 10%; animation-delay: -3s; background: var(--color-secondary); }
.liquid-blob:nth-child(3) { top: 20%; right: 10%; animation-delay: -5s; width: 80px; height: 80px; }
@keyframes blobFloat { 0%, 100% { transform: translate(0, 0) scale(1); } 33% { transform: translate(30px, -20px) scale(1.1); } 66% { transform: translate(-20px, 20px) scale(0.9); } }
@media (max-width: 989px) { .science-explainer__grid { grid-template-columns: 1fr; gap: var(--spacing-8); } .science-explainer__visual { order: -1; max-width: 500px; margin: 0 auto; } }
@media (prefers-reduced-motion: reduce) { .liquid-blob { animation: none; } }
{%- endstyle -%}

<section class="science-explainer">
  <div class="science-explainer__inner">
    <div class="science-explainer__grid">
      <div class="science-explainer__content">
        {% if section.settings.label != blank %}
        <span class="science-explainer__label">{{ section.settings.label }}</span>
        {% endif %}
        <h2 class="science-explainer__title">{{ section.settings.heading | default: 'The Science of Instability' }}</h2>
        <p class="science-explainer__text">{{ section.settings.text | default: 'Our patented Self Destabilizing Impulse (SDI) technology creates unpredictable fluid movement, challenging your neuromuscular system to react and adapt in real-time.' }}</p>
        
        <div class="science-explainer__features">
          {% for block in section.blocks %}
          <div class="science-feature" {{ block.shopify_attributes }}>
            <div class="science-feature__icon">
              {% case block.settings.icon %}
                {% when 'brain' %}
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M12 4C8 4 5 7 5 11C5 13 6 14.5 7 15.5V20H17V15.5C18 14.5 19 13 19 11C19 7 16 4 12 4Z" stroke="currentColor" stroke-width="1.5"/></svg>
                {% when 'lightning' %}
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M13 2L4 14H12L11 22L20 10H12L13 2Z" stroke="currentColor" stroke-width="1.5" stroke-linejoin="round"/></svg>
                {% when 'target' %}
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none"><circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="1.5"/><circle cx="12" cy="12" r="5" stroke="currentColor" stroke-width="1.5"/><circle cx="12" cy="12" r="1" fill="currentColor"/></svg>
                {% else %}
                  <svg width="24" height="24" viewBox="0 0 24 24" fill="none"><path d="M12 2L15 8L22 9L17 14L18 21L12 18L6 21L7 14L2 9L9 8L12 2Z" stroke="currentColor" stroke-width="1.5" stroke-linejoin="round"/></svg>
              {% endcase %}
            </div>
            <div class="science-feature__content">
              <h4>{{ block.settings.title | default: 'Feature' }}</h4>
              <p>{{ block.settings.text | default: 'Description' }}</p>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
      
      <div class="science-explainer__visual">
        {% if section.settings.image %}
        {{ section.settings.image | image_url: width: 800 | image_tag: class: 'science-explainer__image', loading: 'lazy' }}
        {% else %}
        {{ 'product-1' | placeholder_svg_tag: 'science-explainer__image' }}
        {% endif %}
        <div class="science-explainer__animation">
          <div class="liquid-blob"></div>
          <div class="liquid-blob"></div>
          <div class="liquid-blob"></div>
        </div>
      </div>
    </div>
  </div>
</section>

{% schema %}
{
  "name": "Science Explainer",
  "tag": "section",
  "class": "section-science-explainer",
  "settings": [
    { "type": "text", "id": "label", "label": "Label", "default": "The Technology" },
    { "type": "text", "id": "heading", "label": "Heading", "default": "The Science of Instability" },
    { "type": "textarea", "id": "text", "label": "Text", "default": "Our patented SDI technology creates unpredictable fluid movement." },
    { "type": "image_picker", "id": "image", "label": "Image" }
  ],
  "blocks": [
    {
      "type": "feature",
      "name": "Feature",
      "settings": [
        { "type": "select", "id": "icon", "label": "Icon", "default": "brain", "options": [
          { "value": "brain", "label": "Brain" },
          { "value": "lightning", "label": "Lightning" },
          { "value": "target", "label": "Target" },
          { "value": "star", "label": "Star" }
        ]},
        { "type": "text", "id": "title", "label": "Title", "default": "Feature Title" },
        { "type": "text", "id": "text", "label": "Text", "default": "Feature description" }
      ]
    }
  ],
  "presets": [{ "name": "Science Explainer", "blocks": [
    { "type": "feature", "settings": { "icon": "brain", "title": "Neuromuscular Training", "text": "Engages stabilizer muscles" }},
    { "type": "feature", "settings": { "icon": "lightning", "title": "Reactive Power", "text": "Builds explosive strength" }},
    { "type": "feature", "settings": { "icon": "target", "title": "Core Stability", "text": "Enhances balance and control" }}
  ]}]
}
{% endschema %}
